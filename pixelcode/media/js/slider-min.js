(function(a){a.fn.slider=function(b){$slider=a(this);b=a.extend({nav:"ul.nav",items:"ul.items",visible:3,slide:1,speed:200,wrapper_class:"slider-wrapper",fade:false,auto_slide:false,auto_delay:500,auto_direction:"right",easing:"swing",auto_height:true,auto_height_parent:false},b);$slider.each(function(){$slider=a(this);$slider_nav=a(this).children(b.nav);$slider_items=a(this).children(b.items);$slider_items.after($slider_items.clone().hide());$slider_items_content=a(this).children(b.items).eq(1);$slider_items.css({position:"absolute",width:9999}).wrap(a("<div />").addClass(b.wrapper_class).css({position:"relative",overflow:"hidden",height:$slider_items.outerHeight(true)})).children("li").css({"float":"left"});$slider_items.children("li").remove();$slider_items.data("last-index",b.visible);height=0;for(i=0;i<b.visible;i++){$slider_items.append($slider_items_content.children("li").eq(i).clone());if(b.auto_height){if($slider_items.children("li").last().outerHeight(true)>height){height=$slider_items.children("li").last().outerHeight(true)}}}if(b.auto_height&&height!=0){if(b.auto_height_parent){$slider_items.parent("div."+b.wrapper_class).parent().height(height)}else{$slider_items.parent("div."+b.wrapper_class).height(height)}}slide_left=function(){$slider=a(this).data("slider");b=$slider.data("options");$slider_nav=$slider.children(b.nav);$slider_items=$slider.children("div."+b.wrapper_class).children(b.items);$slider_items_content=$slider.children(b.items);if($slider_items.is(":not(:animated)")){start_index=$slider_items.data("last-index")-b.visible-1;height=0;for(i=start_index;i>start_index-b.slide;i--){if(i<0){index=$slider_items_content.children("li").length+i}else{index=i}$slider_items.prepend($slider_items_content.children("li").eq(index).clone());if(b.auto_height){if($slider_items.children("li").first().outerHeight(true)){height=$slider_items.children("li").first().outerHeight(true)}}$slider_items.data("last-index",index+b.visible)}$slider_items.css("left",-$slider_items.children("li").outerWidth(true)*b.slide);if(b.fade){for(i=$slider_items.children("li").length-1;i>$slider_items.children("li").length-b.slide-1;i--){$slider_items.children("li").eq(i).fadeOut(b.speed)}}if(b.auto_height&&height!=0){if(b.auto_height_parent){$slider_items.parent("div."+b.wrapper_class).parent().animate({height:height},b.speed)}else{$slider_items.parent("div."+b.wrapper_class).animate({height:height},b.speed)}}$slider_items.animate({left:"+="+$slider_items.children("li").outerWidth(true)*b.slide},b.speed,b.easing,function(){for(i=0;i<b.slide;i++){$slider_items.children("li").last().remove()}})}return false};slide_right=function(){$slider=a(this).data("slider");b=$slider.data("options");$slider_nav=$slider.children(b.nav);$slider_items=$slider.children("div."+b.wrapper_class).children(b.items);$slider_items_content=$slider.children(b.items);if($slider_items.is(":not(:animated)")){start_index=$slider_items.data("last-index");height=0;for(i=start_index;i<start_index+b.slide;i++){if(i>=$slider_items_content.children("li").length){index=i-$slider_items_content.children("li").length}else{index=i}$slider_items.append($slider_items_content.children("li").eq(index).clone());if(b.auto_height){if($slider_items.children("li").last().outerHeight(true)){height=$slider_items.children("li").last().outerHeight(true)}}$slider_items.data("last-index",index+1)}if(b.fade){for(i=0;i<b.slide;i++){$slider_items.children("li").eq(i).fadeOut(b.speed)}}if(b.auto_height&&height!=0){if(b.auto_height_parent){$slider_items.parent("div."+b.wrapper_class).parent().animate({height:height},b.speed)}else{$slider_items.parent("div."+b.wrapper_class).animate({height:height},b.speed)}}$slider_items.animate({left:"-="+$slider_items.children("li").outerWidth(true)*b.slide},b.speed,b.easing,function(){$slider_items.css("left",0);for(i=0;i<b.slide;i++){$slider_items.children("li").first().remove()}})}return false};$slider.data("options",b);$slider_nav.children("li.prev").data("slider",$slider).click(slide_left);$slider_nav.children("li.next").data("slider",$slider).click(slide_right);if(b.auto_slide){auto_timeout=setTimeout(function(){setInterval(function(){if(b.auto_direction=="left"){$slider.children(b.nav).children("li.prev").click()}else{$slider.children(b.nav).children("li.next").click()}},b.auto_delay);clearTimeout(auto_timeout)},b.auto_delay)}});return this}})(jQuery);